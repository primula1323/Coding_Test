---
title: "Econometrics HW2 coding part"
author: "Na SeungChan"
output:
  pdf_document: 
   latex_engine: xelatex
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library('tidyverse')
library('estimatr')
```


## Q3


You may continue on your previously collected dataset, or select another cross-
sectional data. Let the variables of interest be Y and X1. The main research question is ”Does X1 affect Y ? If so, how much?”.


```{r}
dataset <- read.csv('co2-emissions-vs-gdp.csv') %>%
  filter(Year == 2018) %>% 
  filter(Code != '', Code != 'OWID_WRL')

dataset1 <- read.csv('energy.csv') %>%
  filter(Year == 2018) %>% 
  filter(Code != '', Code != 'OWID_WRL')

full_data <- left_join(dataset, dataset1)
glimpse(full_data)
```


Data form our world in data. Focused on countries in 2018 only.
First dataset is from https://ourworldindata.org/grapher/co2-emissions-vs-gdp 
, Second dataset is from https://ourworldindata.org/energy

full_data are the merged data of above two.





### (i)


Regress Y on X1 (and a constant, of course) and draw the fitted line on the scatter plot.
Provide the standard errors for the point estimates. Interpret the result.


```{r}
lm_a <- lm_robust(Annual.CO..emissions..per.capita. ~ GDP.per.capita, data = full_data)
summary(lm_a)

ggplot(data = full_data, aes(x = GDP.per.capita, y = Annual.CO..emissions..per.capita.)) +
  geom_point() +
  geom_abline(intercept = 0.5783892, slope = 0.0002198)
```


Research Question is about the causal correlation between the GDP per capita and annual CO2 emission per capita.

se(intercept) : 2.564e-01, se(slope) : 1.863e-05

p-value for slope Pr(>|t|) = <2.2e-16 ***. This means the significance of the regression model.





### (ii)


Add additional variables X2, ..., Xk that may affect Y and estimate the multiple regression model. Compare the coefficient estimate of X1 with (i). Note that the main research question is unchanged. The additional variables are supposed to eliminate possible omitted variable bias in the simple regression.


```{r}
lm_b <- lm_robust(Annual.CO..emissions..per.capita. ~ GDP.per.capita + Primary.energy.consumption.per.capita..kWh.person. , data = full_data)
summary(lm_b)
```


Now I added X2 as 'energy use per capita.' This can be helpful because some of developed countries may use more non-fossil fuel energy.

p-value for 'energy use per capita' is smaller, and adjusted R^2 is bigger for the second model. But, 'the usage of eco-frendily energy' may be more helpful for this purpose, but making data like that was seriouly hard data wrangling(keys are not consistent). Making those data can improve the quality of this research.

